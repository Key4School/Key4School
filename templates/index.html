<!DOCTYPE html>
<html lang="fr">

<head>
  <!-- language utf8 pour indiquer l'encodage -->
  <meta charset="UTF-8">
  <!-- pour l'adapter plus ou moins bien sur telephone -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- titre en haut dans le navigateur -->
  <title>Mon lycée</title>
  <!-- page de style -->
  <link rel="stylesheet" type="text/css" href="{{url_for('static',filename='styles/style.css')}}">
  <!-- importation de la bibliotheque j query qui est requise pour faire marcher le js-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.0/css/bulma.min.css">
  <script src="https://kit.fontawesome.com/87544e3da3.js" crossorigin="anonymous"></script>
  <!-- importation du JS pour afficher et enlever les div -->
  <script src="{{url_for('static',filename='js/publication.js')}}" type="text/javascript"></script>
  <style>
    .logoBouton:hover {
      cursor: pointer;
    }
  </style>
</head>

<body>
  {% include "bandeau.html" %}
  <!-- debut de la div pour tt les publications -->
  <div class="columns" style="margin-top:5%;">
    <div class="column"></div>
    <div class="column">
      {%for d in demandes %}
        <!-- Début publi -->
        <div class="box">
          <article class="media">
            <div class="media-left">
              <!-- Image photo de profil-->
              <figure class="image is-64x64">
                <img class="is-rounded" src="https://bulma.io/images/placeholders/128x128.png">
              </figure>
            </div>
            <!-- Contenu publication -->
            <div class="media-content">
              <div class="content">
                <p style="margin-bottom: 5px;">
                  <!-- Nom utilisateur ; pseudo ; temps -->
                  <strong>{{d['user']['nom']}} {{d['user']['prenom']}}</strong> <small><em>@{{d['user']['pseudo']}}</em></small> <small>{{d['temps']}}</small>
                </p>
                <!-- Titre -->
                <h3 style="margin-top: 0;">{{d['titre']}}</h3>
                <!-- Texte publication -->
                <p>{{d['contenu']}}</p>
                </p>
              </div>
              <!-- Icons like et commentaire -->
              <nav class="level is-mobile">
                <div class="level-left">
                  <a class="level-item" aria-label="like" onClick="like('{{d['idMsg']}}')">
                    <span class="icon is-small">
                      {% if d['a_like'] %}
                        <i id="like_{{d['idMsg']}}" class="fas fa-thumbs-up" aria-hidden="true" style="padding-left: 5px;">{{d['nb-likes']}}</i>
                      {% else %}
                        <i id="like_{{d['idMsg']}}" class="far fa-thumbs-up" aria-hidden="true" style="padding-left: 5px;">{{d['nb-likes']}}</i>
                      {% endif %}
                    </span>
                  </a>
                  <a class="level-item" aria-label="comment" href="{{url_for('comments')}}">
                    <span class="icon is-small">
                      <i class="far fa-comment" aria-hidden="true"></i>
                    </span>
                  </a>
                </div>
              </nav>
            </div>
          </article>
        </div>
        <!-- Fin publi -->
      {%endfor%}
    </div>
    <div class="column"></div>
  </div>

  <!-- fin de l'espace des publication -->

</body>

</html>
