<!DOCTYPE html>
<head>
  <!-- language utf8 pour indiquer l'encodage -->
  <meta charset="UTF-8">
  <!-- pour l'adapter plus ou moins bien sur telephone -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- titre en haut dans le navigateur -->
  <title>Administration</title>
  <!-- page de style -->
  <link rel="stylesheet" type="text/css" href="{{url_for('static',filename='styles/style.css')}}">
  <!-- importation de la bibliotheque j query qui est requise pour faire marcher le js-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <link rel="stylesheet" href="{{url_for('static',filename='css/mystyles.css')}}">
  <script src="https://kit.fontawesome.com/87544e3da3.js" crossorigin="anonymous"></script>
  <!-- importation du JS pour afficher et enlever les div -->
  <script src="{{url_for('static',filename='js/administration.js')}}" type="text/javascript"></script><script src="{{url_for('static',filename='js/main.js')}}" type="text/javascript"></script>
  <style>
    .logoBouton:hover {
      cursor: pointer;
    }
  </style>
</head>
<body>
  {% include "bandeau.html" %}
  <br /><br /><br />

  <div class="modal" id="suppression" style="overflow:hidden;">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Supression</p>
      </header>
      <form onsubmit="supprimer(event); return false;" id="supprForm" method="POST" autocomplete="off">
        <section class="modal-card-body">
          <input type="text" name="motif" placeholder="motif"required/>
          <input type='hidden' id="idSupprimé" name='idSuppr' value="" />
          <input type='hidden' name="demandeBut" value="Suppr" />
        </section>
        <footer class="modal-card-foot">
          <button type="submit" class="button is-success">supprimer</button>
          <button onclick="supprimerClose(); return false;" class="button">Annuler</button>
        </footer>
      </form>
    </div>
  </div>
  <div class="modal" id="validation" style="overflow:hidden;">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Validation</p>
      </header>
      <form onsubmit="valider(event); return false;" id="valForm" method="POST" autocomplete="off">
        <section class="modal-card-body">
          <select name="motif">
            <option value="abusif">Signalement abusif</option>
            <option value="justifie">Justifié</option>
          </select>
          <input type='hidden' id="idValidé" name='idVal' value="" />
          <input type='hidden' name="demandeBut" value="Val" />
        </section>
        <footer class="modal-card-foot">
          <button type="submit" class="button is-success">Valider</button>
          <button onclick="validerClose(); return false;" class="button">Annuler</button>
        </footer>
      </form>
    </div>
  </div>
  <br />
<h1 class="title" style="text-align:center;">Administration</h1>
<br /><br />
  {%for content in demandeSignale%}
    <div style="border:2px solid {{session['couleur']}};padding:1%;margin-left:20%;margin-right:20%;" id='divDemande_{{content['_id']}}'><div>
      {{content['rep']['prenom']}} {{content['rep']['nom']}} {{content['contenu']}} {{content['date-envoi']}} {{content['matière']}} 
      <br />
    </div>
    <br />

    <ul class="menu-list">
    <li><u>Motif :</u></li>
    <li>
      <ul>
        {%for element in content['motif']%}
          <li>
            {{element['txt']}}
          </li>
        {%endfor%}
      </ul>
    </li>
  </ul>


    <br />
    <button onclick="validation('{{content['_id']}}')" class="button is-success is-outlined">
     <span>Valider</span>
     <span class="icon is-small">
       <i class="fas fa-check"></i>
     </span>
   </button>
    <button onclick="suppression('{{content['_id']}}')" class="button is-danger is-outlined">
     <span>Supprimer</span>
     <span class="icon is-small">
       <i class="fas fa-times"></i>
     </span>
   </button>
  </div>
  <br /><br />
  {%endfor%}
  {%for content in profilSignale%}
  <div style="border:2px solid {{session['couleur']}};padding:1%;margin-left:20%;margin-right:20%;">
    <div>
    <a href="{{url_for('profil' ,idUser=content['_id'])}}">
    {{content['nom']}}
  </a>
  </div>
  {%for element in content['motif']%}
  <div>
      motif: {{element['txt']}}
  </div>
  {%endfor%}
</div>
  {%endfor%}
</body>

<!-- <div id='divDemande'>
  <form  method="post"  id="demandeSuppr" onsubmit="supprimer(event, ); return false;">
    <input type='hidden' name="idSuppr" value="" />
    <input type='hidden' name="demandeBut" value="Suppr" />
    <button  type="submit">supprimer</button>
  </form>
  <form  method="post"  id="demandeValider" onsubmit="valider(event, ); return false;">
    <input type='hidden' name="idVal" value="" />
    <input type='hidden' name="demandeBut" value="Val" />
    <button  type="submit">valider</button>
  </form>
</div> -->
